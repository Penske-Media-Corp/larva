!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return r}));class s{constructor(e){this.el=e,this.toggleEl=this.el.querySelector("[data-collapsible-toggle]"),this.panels=[...this.el.querySelectorAll("[data-collapsible-panel]")],this.group=this.findGroup(),this.toggle=this.toggle.bind(this),this.onClick=this.onClick.bind(this),this.toggleEl&&this.toggleEl.addEventListener("click",this.onClick)}destroy(){this.toggleEl&&this.toggleEl.removeEventListener("click",this.onClick),this.isCollapsed||this.toggle()}get state(){return this.el.dataset.collapsible}set state(e){this.el.dataset.collapsible=e,this.isCollapsed?this.el.classList.remove("is-expanded"):this.el.classList.add("is-expanded")}get isCollapsed(){return"collapsed"===this.state}get container(){return document.querySelector(this.el.dataset.collapsibleContainer)}get closeOnClick(){return void 0!==this.el.dataset.collapsibleCloseOnClick}findGroup(){return[...document.body.querySelectorAll("[data-collapsible-group]")].find(e=>e.contains(this.el))||null}onClick(e){e.preventDefault(),this.toggle()}toggle(){this.state=this.isCollapsed?"expanded":"collapsed",this.maybeRepositionPanel(),this.maybeCloseOnClick(),"expanded"===this.state&&(document.querySelector("[data-collapsible-toggle] + li > a").focus(),null!==this.group&&this.closeOthersInGroup())}collapse(){"expanded"===this.state&&this.toggle()}closeOthersInGroup(){[...this.group.querySelectorAll("[data-collapsible]")].forEach(e=>{e!==this.el&&e.pmcCollapsible.collapse()})}maybeRepositionPanel(){if(this.container)if(this.isCollapsed)this.panels.forEach(e=>e.style.marginLeft="");else{const e=this.container.getBoundingClientRect().left;this.panels.forEach(t=>{const i=t.getBoundingClientRect();if(0===i.width&&0===i.height)return;const s=parseInt(window.getComputedStyle(t).marginLeft,10),a=i.left-2*s;a<e&&(t.style.marginLeft=e-a+"px")})}}maybeCloseOnClick(){this.closeOnClick&&(this.isCollapsed?document.body.removeEventListener("click",this.toggle):setTimeout(()=>document.body.addEventListener("click",this.toggle),1))}}class a{constructor(e){var t,i,s,a;this.el=e,this.triggers=[...e.querySelectorAll("[data-video-showcase-trigger]")],this.player=e.querySelector("[data-video-showcase-player]"),this.elementsToHide=[...this.el.querySelectorAll(".is-to-be-hidden")],this.attributesToRemoveFromPlayer=["data-video-showcase-trigger","data-video-showcase-title","data-video-showcase-dek","data-video-showcase-permalink","data-video-showcase-type","href"],this.state={isPlayerSetup:!1,hasSocialShare:!1,videoID:"",videoType:""},this.playerUI={title:e.querySelector(".js-VideoShowcase-title"),sponsoredBadge:e.querySelector(".js-video-showcase-sponsored-badge"),dek:e.querySelector(".js-VideoShowcase-dek"),iframe:e.querySelector("[data-video-showcase-iframe]"),jwplayerContainer:e.querySelector("#jwplayerContainer"),social:e.querySelector("[data-video-showcase-player-social-share]")},this.init(),t=this.el,i="click",s="[data-video-showcase-trigger]",a=this.handleTriggerClick.bind(this),t.addEventListener(i,e=>{const t=((e,t)=>t.matches&&t.matches(e))(s,e.target)?e.target:e.target.closest(s);t&&a(e,t)})}init(){null!==this.playerUI.social&&(this.state.hasSocialShare=!0)}getPlayerCardData(e){const t=e.dataset.videoShowcaseTrigger,i=this.state.hasSocialShare;return{title:e.dataset.videoShowcaseTitle,sponsored:e.dataset.videoShowcaseSponsored,dek:e.dataset.videoShowcaseDek,permalink:e.dataset.videoShowcasePermalink,socialString:function(e){if(window.wp&&i){return wp.template("trigger-social-share-"+t)(void 0)}}()}}updatePlayerCardData(e,t){console.log(t),t.title&&(this.playerUI.title.innerText=t.title),t.permalink&&this.playerUI.title.setAttribute("href",t.permalink),t.dek&&(this.playerUI.dek.innerText=t.dek),t.socialString&&this.state.hasSocialShare&&this.updateCardSocialShare(t.socialString),null!==this.playerUI.sponsoredBadge&&(t.sponsored?this.playerUI.sponsoredBadge.classList.remove("u-hidden"):this.playerUI.sponsoredBadge.classList.add("u-hidden"))}updateCardSocialShare(e){this.playerUI.social.removeChild(this.playerUI.social.querySelector("ul")),this.playerUI.social.insertAdjacentHTML("beforeend",e),[...document.querySelectorAll("[data-collapsible]")].forEach(e=>e.pmcCollapsible=new s(e))}returnUrl(e,t){return"youtube"===t?"https://www.youtube.com/embed/"+e:"jwplayer"===t?`https://content.jwplatform.com/feeds/${e}.json`:void 0}playYoutube(e){this.playerUI.iframe.removeAttribute("hidden"),this.playerUI.iframe.setAttribute("src",e+"?rel=0&autoplay=1&showinfo=0&controls=2&rel=0&modestbranding=0")}playJW(e){let t="";this.playerUI.jwplayerContainer.removeAttribute("hidden"),window.jwplayer&&(t=window.jwplayer(this.playerUI.jwplayerContainer).setup({playlist:e,aspectratio:"16:9"}),"object"==typeof pmc_video_ads&&"function"==typeof pmc_video_ads.setup_jwplayer&&pmc_video_ads.setup_jwplayer(this.playerUI.jwplayerContainer.id),void 0!==window.pmc_ga_jwplayer&&"function"==typeof window.pmc_ga_jwplayer.setup_tracking_by_object&&window.pmc_ga_jwplayer.setup_tracking_by_object(this.playerUI.jwplayerContainer),t.play())}handleTriggerClick(e,t){e.preventDefault();let i=this.state.videoType;this.state.videoType=t.dataset.videoShowcaseType,this.state.videoID=t.dataset.videoShowcaseTrigger,this.resetPlayer(i),this.playVideo(this.state.videoID,this.state.videoType),this.updatePlayerUI(this.state.videoID),this.onFirstTimePlay()}playVideo(e,t){let i=this.returnUrl(e,t);"youtube"===t&&this.playYoutube(i),"jwplayer"===t&&this.playJW(i)}onFirstTimePlay(){!1===this.state.isPlayerSetup&&(this.elementsToHide.forEach(e=>e.setAttribute("hidden","")),this.attributesToRemoveFromPlayer.forEach(e=>this.player.parentNode.removeAttribute(e)),this.state.isPlayerSetup=!0)}updatePlayerUI(e){const t=this.el.querySelector(`[data-video-showcase-trigger="${e}"]`),i=this.getPlayerCardData(t);this.setActiveTrigger(e),this.updatePlayerCardData(t,i)}resetPlayer(e){"jwplayer"===e&&window.jwplayer&&(window.jwplayer("jwplayerContainer").remove(),this.playerUI.jwplayerContainer.setAttribute("hidden","")),"youtube"===e&&(this.playerUI.iframe.setAttribute("src",""),this.playerUI.iframe.setAttribute("hidden",""))}resetAllTriggers(){this.triggers.forEach(e=>e.classList.remove("is-playing"))}setActiveTrigger(e){let t=this.el.querySelector(`[data-video-showcase-trigger="${e}"]`);this.resetAllTriggers(),null!==t&&t.classList.add("is-playing")}}function r(){const e=[...document.querySelectorAll("[data-video-showcase]")];e.length&&e.forEach(e=>e.pmcVideoShowcase=new a(e))}}]);