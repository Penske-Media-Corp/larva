
@import "../pmc-breakpoint";

@mixin _grid-base( $columns, $breakpoint: false ) {

	@if $breakpoint {
		@include pmc-breakpoint( $breakpoint ) {
			.pmc-cols#{$columns}\@#{$breakpoint} {
				--cols: #{$columns};
			}
		}
	} @else {
		.pmc-cols#{$columns} {
			--cols: #{$columns};
		}
	}
}

@mixin _grid-item( $span ) {
	float: left;

	@supports( display: grid ) {
		grid-column: span #{$span};
	}
}

@mixin _grid-item-base( $span: 1, $breakpoint: false ) {

	@if $breakpoint {
		@include pmc-breakpoint( $breakpoint ) {
			.pmc-span#{$span}\@#{$breakpoint} {
				@include _grid-item( $span );
			}
		}
	} @else {
		.pmc-span#{$span} {
			@include _grid-item( $span );
		}
	}

}

@mixin _grid-class-generator( $tokens ) {

	@if type-of($tokens) != 'list' {
		@error "`#{$tokens}` is not a valid value for $tokens. It must be a list of maps.";
	}

	@each $grid in $tokens {
		$breakpoint: map-get( $grid, breakpoint );
		$columns: map-get( $grid, columns );
		$spans: map-get( $grid, spans );

		@include _grid-base( $columns, $breakpoint );

		@if $spans {

			@each $span in $spans {
				@include _grid-item-base( $span, map-get( $grid, breakpoint ) );
			}
		}
	}
}